<ui:composition template="template/main.xhtml"
	xmlns="http://www.w3.org/1999/xhtml"
	xmlns:f="http://java.sun.com/jsf/core"
	xmlns:h="http://java.sun.com/jsf/html"
	xmlns:ui="http://java.sun.com/jsf/facelets"
	xmlns:p="http://primefaces.org/ui">

	<ui:define name="content">
		<h:form prependId="false">
			<p:growl id="growl" sticky="false" showDetail="true" life="2000" />

			<p:panel header="Cadastrar Placa">
				<h:panelGrid columns="2">

					<p:outputLabel for="hub" value="HUB: " />
					<p:selectOneMenu id="hub" value="#{placaMB.hubId}" required="true">
						<f:selectItem itemLabel="Selecione a HUB" itemValue="" />
						<f:selectItems value="#{placaMB.hubs}" var="hub"
							itemValue="#{hub.id}" itemLabel="#{hub.codHub}">

						</f:selectItems>
						<p:ajax update="lstBoxCmts"
							listener="#{placaMB.handleHubListBoxChange}" />
					</p:selectOneMenu>

					<p:outputLabel value="CMTS: " />
					<p:selectOneMenu id="lstBoxCmts" value="#{placaMB.cmtsId}"
						required="true">
						<f:selectItem itemLabel="Selecione o CMTS" itemValue="" />
						<f:selectItems value="#{placaMB.cmtsList}" var="cmts"
							itemValue="#{cmts.id}" itemLabel="#{cmts.nome}">

						</f:selectItems>
						<p:ajax update="slotSOM"
							listener="#{placaMB.handleCmtsListBoxChange}" process="@this" />
					</p:selectOneMenu>

					<p:outputLabel value="Slot:" />
					<p:selectOneMenu id="slotSOM" value="#{placaMB.slotId}"
						required="true">
						<f:selectItem itemLabel="Selecione o Slot" itemValue="" />
						<f:selectItems value="#{placaMB.slots}" var="slot"
							itemValue="#{slot.id}" itemLabel="#{slot.codSlot}" />
					</p:selectOneMenu>

					<p:outputLabel value="Placa:" />
					<p:inputText placeholder="Digite o modelo da placa"
						value="#{placaMB.placa.codPlaca}" />

					<p:outputLabel value="Conectores:" />
					<p:inputText id="conList" placeholder="0,1, 2, 3, 4, 5, ..."
						value="#{placaMB.converter.stringConectorList}" />

					<p:commandButton id="ajax" value="Add"
						actionListener="#{placaMB.addConectorsAction}"
						process="@this, conList" update="conector" />
				</h:panelGrid>

				<br />
				<h:panelGroup>
					<p:panelGrid id="grid" columns="4">
						<p:selectOneMenu id="conector"
							value="#{placaMB.converter.stringNumConector}" required="true">
							<f:selectItem itemLabel="Selecione o Conector" itemValue="" />
							<f:selectItems value="#{placaMB.conectors}" var="conector"
								itemValue="#{conector.numConector}"
								itemLabel="#{conector.numConector}">
							</f:selectItems>
						</p:selectOneMenu>

						<p:selectOneMenu id="typeStream"
							value="#{placaMB.converter.stringTypeStream}" required="true">
							<f:selectItem itemLabel="Selecione o tipo de Stream" itemValue="" />
							<f:selectItem itemLabel="UPSTREAM" itemValue="UPSTREAM" />
							<f:selectItem itemLabel="DOWNSTREAM" itemValue="DOWNSTREAM" />
						</p:selectOneMenu>

						<p:inputText placeholder="0,1, 2, 3, 4, 5, ..."
							value="#{placaMB.converter.stringNameUpOrDownList}" />

						<p:commandButton value="Add"
							actionListener="#{placaMB.addConvertersAction}"
							process="@this, grid" update="converterDT" />
					</p:panelGrid>

					<p:spacer />

					<p:dataTable id="converterDT" var="converter"
						value="#{placaMB.converterList}">
						<p:column>
							<f:facet name="header">
								<h:outputText value="Conector" />
							</f:facet>
						#{converter.stringNumConector}
					</p:column>
						<p:column>
							<f:facet name="header">
								<h:outputText value="Tipo" />
							</f:facet>
						#{converter.stringTypeStream}
					</p:column>
						<p:column>
							<f:facet name="header">
								<h:outputText value="Nomes" />
							</f:facet>
						#{converter.stringNameUpOrDownList}
					</p:column>
						<p:column>
							<f:facet name="header">
								<h:outputText value="Opções" />
							</f:facet>
							<h:commandLink value="editar" action="#{placaMB.prepareToEdit()}">
							</h:commandLink>  &#160;
						<h:commandLink value="remover" action="#{placaMB.delete()}"
								onclick="return confirm('Deseja realmente remover essa Configuração?');"
								update="growl">
								<f:ajax render="@form" />
							</h:commandLink>
						</p:column>

					</p:dataTable>

					<br />

					<p:commandButton value="Cadastrar" id="addPlaca" update="growl"
						actionListener="#{placaMB.save}"
						action="hubList?faces-redirect=true" />
				</h:panelGroup>
			</p:panel>
		</h:form>

	</ui:define>
</ui:composition>