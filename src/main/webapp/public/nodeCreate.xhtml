<ui:composition template="template/main.xhtml"
	xmlns="http://www.w3.org/1999/xhtml"
	xmlns:f="http://java.sun.com/jsf/core"
	xmlns:h="http://java.sun.com/jsf/html"
	xmlns:ui="http://java.sun.com/jsf/facelets"
	xmlns:p="http://primefaces.org/ui">

	<ui:define name="content">
		<h:form prependId="false">
			<p:growl id="growl" sticky="false" showDetail="true" life="2000" />

			<p:panel header="Cadastrar Node">
				<h:panelGrid columns="2">
					<p:outputLabel value="Node:" />
					<p:inputText placeholder="Digite o cÃ³digo do Node"
						value="#{nodeMB.node.codNode}" />

					<p:outputLabel for="hub" value="HUB: " />
					<p:selectOneMenu id="hub" value="#{nodeMB.hubId}" required="true">
						<f:selectItem itemLabel="Selecione a HUB" itemValue="" />
						<f:selectItems value="#{nodeMB.hubs}" var="hub"
							itemValue="#{hub.id}" itemLabel="#{hub.codHub}">

						</f:selectItems>
						<p:ajax update="lstBoxCmts"
							listener="#{nodeMB.handleHubListBoxChange}" />
					</p:selectOneMenu>

					<p:outputLabel value="CMTS: " />
					<p:selectOneMenu id="lstBoxCmts" value="#{nodeMB.cmtsId}"
						required="true">
						<f:selectItem itemLabel="Selecione o CMTS" itemValue="" />
						<f:selectItems value="#{nodeMB.cmtsList}" var="cmts"
							itemValue="#{cmts.id}" itemLabel="#{cmts.nome}">

						</f:selectItems>
						<p:ajax update="lstBoxPlaca"
							listener="#{nodeMB.handleCmtsListBoxChange}" process="@this" />
					</p:selectOneMenu>

					<p:outputLabel value="Placa:" />
					<p:selectOneMenu id="lstBoxPlaca" value="#{nodeMB.placaId}"
						required="true">
						<f:selectItem itemLabel="Selecione a Placa" itemValue="" />
						<f:selectItems value="#{nodeMB.placas}" var="placa"
							itemValue="#{placa.id}" itemLabel="#{placa.codPlaca}" />
						<p:ajax update="conectors" listener="#{nodeMB.loadPlaca}"
							process="@this" />
					</p:selectOneMenu>
				</h:panelGrid>

				<p:spacer />

				<h:panelGroup>
					<p:panelGrid id="conectors" columns="2" style="width:800px;">

						<ui:repeat var="conn" value="#{nodeMB.placa.conectorList}">
						<p:outputLabel value="Conector: #{conn.numConector}" />
							<p:selectManyCheckbox value="#{nodeMB.selectedUps}" layout="grid"
								columns="5">
								<f:selectItems value="#{conn.upstreamList}" var="up"
									itemValue="#{up.id}" itemLabel="up#{up.numUpStream}"
									 />
							</p:selectManyCheckbox>
							<p:selectManyCheckbox value="#{nodeMB.selectedDowns}"
								layout="grid" columns="10">
								<f:selectItems value="#{conn.downstreamList}" var="down"
									itemValue="#{down.id}" itemLabel="dw#{down.numDownStream}" />
							</p:selectManyCheckbox>
						</ui:repeat>

					</p:panelGrid>

					<br />

					<p:commandButton value="Cadastrar" id="addNode" update="growl"
						actionListener="#{nodeMB.save}" action="cmtsCreateEdit?faces-redirect=true"
						 />
				</h:panelGroup>
			</p:panel>
		</h:form>

	</ui:define>
</ui:composition>